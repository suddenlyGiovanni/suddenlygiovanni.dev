name: ğŸ¶ reviewdog
on: pull_request
jobs:
  actionlint:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ¶ reviewdog with actionlint
        uses: reviewdog/action-actionlint@v1
        continue-on-error: true
        with:
          fail_on_error: false
          filter_mode: nofilter
          github_token: ${{ secrets.github_token }}
          level: error
          reporter: github-pr-review
          tool_name: actionlint

  hadolint:
    name: runner / hadolint
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ¶ reviewdog with hadolint (Dockerfile)
        uses: reviewdog/action-hadolint@v1
        continue-on-error: true
        with:
          filter_mode: nofilter
          reporter: github-pr-review
          github_token: ${{ secrets.github_token }}

  shellcheck:
    name: runner / shellcheck
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ¶ reviewdog with shellcheck (shell)
        uses: reviewdog/action-shellcheck@v1
        with:
          check_all_files_with_shebangs: "true" # Optional.
          exclude: "./.git/*" # Optional.
          fail_on_error: false
          filter_mode: nofilter
          github_token: ${{ secrets.github_token }}
          path: "." # Optional.
          pattern: "*.sh" # Optional.
          reporter: github-pr-review

  shfmt:
    name: runner / shfmt
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ¶ reviewdog with shfmt (shell)
        uses: reviewdog/action-shfmt@v1
        continue-on-error: true
        with:
          check_all_files_with_shebangs: true
          exclude: "*/.git/*"
          fail_on_error: false
          filter_mode: nofilter
          github_token: ${{ secrets.github_token }}
          level: "warning"
          path: "."
          pattern: "*.sh"
          reporter: github-pr-review

  markdownlint:
    name: runner / markdownlint
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ¶ reviewdog with markdownlint (markdown)
        continue-on-error: true
        uses: reviewdog/action-markdownlint@v0
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          reporter: github-pr-review
          level: warning
          filter_mode: nofilter
          fail_on_error: false

  tsc:
    name: runner / tsc
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ“¦ Install pnpm
        uses: pnpm/action-setup@v3
        with:
          version: 8

      - name: ğŸ› ï¸ Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: current
          cache: "pnpm"

      - name: ğŸ§© Install dependencies
        run: pnpm install --frozen-lockfile --prod=false

      - name: ğŸ¶ reviewdog with tsc (TypeScript) - packages/ui
        uses: EPMatt/reviewdog-action-tsc@v1
        with:
          github_token: ${{ secrets.github_token }}
          workdir: "."
          level: error
          reporter: github-pr-review
          filter_mode: nofilter
          fail_on_error: false
          tsc_flags: "--noEmit --pretty --project packages/ui"

      - name: ğŸ¶ reviewdog with tsc (TypeScript) - apps/web
        uses: EPMatt/reviewdog-action-tsc@v1
        with:
          github_token: ${{ secrets.github_token }}
          workdir: "."
          level: error
          reporter: github-pr-review
          filter_mode: nofilter
          fail_on_error: false
          tsc_flags: "--noEmit --pretty --project apps/web"

  biome:
    name: runner / Biome
    runs-on: ubuntu-latest
    continue-on-error: true
    timeout-minutes: 5
    permissions:
      contents: read
      pull-requests: write
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ¶ reviewdog with Biome
        uses: mongolyy/reviewdog-action-biome@v1
        with:
          github_token: ${{ secrets.github_token }}
          workdir: "."
          level: error
          reporter: github-pr-review
          filter_mode: nofilter
          fail_on_error: false
          biome_flags: "--formatter-enabled=false --linter-enabled=true apps/web"


#  prettier:
#    name: runner / prettier
#    runs-on: ubuntu-latest
#    steps:
#      - name: ğŸ“¥ Checkout code
#        uses: actions/checkout@v4
#
#      - name: ğŸ“¦ Install pnpm
#        uses: pnpm/action-setup@v3
#        with:
#          version: 8
#
#      - name: ğŸ› ï¸ Set up Node.js
#        uses: actions/setup-node@v4
#        with:
#          node-version: current
#          cache: "pnpm"
#
#      - name: ğŸ§© Install dependencies
#        run: pnpm install --frozen-lockfile
#
#      - name: ğŸ¶ reviewdog with prettier (apps/web)
#        uses: EPMatt/reviewdog-action-prettier@v1
#        continue-on-error: true
#        with:
#          github_token: ${{ secrets.github_token }}
#          reporter: github-pr-review
#          level: warning
#          filter_mode: nofilter
#          workdir: .
#          prettier_flags: --check --config ./apps/web/.prettierrc.js --ignore-path ./apps/web/.prettierignore apps/web/**/*.{ts,tsx,js,jsx,json,cjs,mjs}

#  eslint:
#    name: runner / eslint
#    runs-on: ubuntu-latest
#    permissions:
#      contents: read
#      pull-requests: write
#    steps:
#      - name: ğŸ“¥ Checkout code
#        uses: actions/checkout@v4
#
#      - name: ğŸ“¦ Install pnpm
#        uses: pnpm/action-setup@v3
#        with:
#          version: 8
#
#      - name: ğŸ› ï¸ Set up Node.js
#        uses: actions/setup-node@v4
#        with:
#          node-version: current
#          cache: "pnpm"
#
#      - name: ğŸ§© Install dependencies
#        run: pnpm install --frozen-lockfile
#
#      - uses: reviewdog/action-eslint@v1
#        continue-on-error: true
#        with:
#          github_token: ${{ secrets.GITHUB_TOKEN }}
#          reporter: github-pr-review # Change reporter.
#          workdir: apps/web
#          eslint_flags: --ext ts,tsx,js,cjs,mjs,jsx  ./app
#
#      - uses: reviewdog/action-eslint@v1
#        continue-on-error: true
#        with:
#          github_token: ${{ secrets.GITHUB_TOKEN }}
#          reporter: github-pr-review # Change reporter.
#          workdir: packages/ui
#          eslint_flags: --ext ts,tsx,js,cjs,mjs,jsx  ./src

#  misspell:
#    name: runner / misspell
#    runs-on: ubuntu-latest
#    steps:
#      - name: ğŸ“¥ Checkout code
#        uses: actions/checkout@v4
#      - name: misspell
#        uses: reviewdog/action-misspell@v1
#        with:
#          github_token: ${{ secrets.github_token }}
#          locale: "US"
